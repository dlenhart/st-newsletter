{% extends 'layout.html' %}

{% block content %}
<a class="waves-effect waves-light btn" alt="Edit" href="/" role="button">Signup Page</a>
<a class="waves-effect waves-light btn" alt="Edit" href="/admin/export" role="button">export</a>
<a class="waves-effect waves-light btn" alt="Edit" href="/logout" role="button">logout</a>

<div class="box_c z-depth-4"><div class="box_t white-text"><b>Registered Users:</b></div><div class="st_boxes">
<table class="bordered"><thead><tr><td>ID</td><td>Name</td><td>Email</td><td>Join Date</td><td class="center">Action</td></tr></thead>
<tbody>
{% for item in list %}
	<tr>
		<td>{{ item.id }}</td>
		<td>{{ item.name }}</td>
		<td>{{ item.email }}</td>
		<td>{{ item.joined }}</td>

		<td class="center">

		<a class="waves-effect waves-light btn" onclick="deleteMe('{{ item.id }}')">remove <span id="deleteSpin{{ item.id }}" class="glyphicon glyphicon-refresh spinning"></span></a>

		<a class="waves-effect waves-light btn" alt="Edit" data-target='#edit{{ item.id }}' href="admin/edit/{{ item.id }}" role="button">Edit</a> 

		</td>
	</tr>
{% else %}  
	<p style='color: red'>There are currently no people who signed up yet!!</p>
{% endfor %}
</tbody>
</table>

<!-- Add pagination at some point 
<ul class="pagination center">
	<li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>
	<li class="active"><a href="#!">1</a></li>
	<li class="waves-effect"><a href="#!">2</a></li>
	<li class="waves-effect"><a href="#!">3</a></li>
	<li class="waves-effect"><a href="#!">4</a></li>
	<li class="waves-effect"><a href="#!">5</a></li>
	<li class="waves-effect"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
</ul>-->

</div></div>
<script>
function deleteMe (id) {
	document.getElementById('deleteSpin' + id).style.display = 'block';
	if(confirm('Are you sure you want to delete this Record? This will completely remove the record from the system!')){
		$.post("api/deleteEmail/" + id,
		function(data, status){
			document.getElementById('deleteSpin' + id).style.display = 'none';
			location.reload();
		});
	}else{
		alert('Item not deleted!');
		document.getElementById('deleteSpin' + id).style.display = 'none';
	}
}
</script>
{% endblock %}